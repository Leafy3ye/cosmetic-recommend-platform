# 商家端功能说明

## 概述
商家端功能已完善，商家用户登录后拥有专属的管理界面，包括商品管理和订单管理，与普通用户界面完全区分。

## 功能特性

### 1. 商家权限识别
- 系统通过用户角色（role=1）识别商家身份
- 商家用户在顶部导航栏下拉菜单和个人中心会显示专属功能入口
- 普通用户无法访问商家管理页面
- 商家和普通用户的菜单已完全区分

### 2. 商家专属菜单

#### 顶部导航栏下拉菜单（商家）
- **个人中心**：查看个人信息
- **商品管理**：管理商品上架、编辑、删除
- **订单管理**：查看订单、发货等操作
- **退出登录**

#### 顶部导航栏下拉菜单（普通用户）
- **个人中心**：查看个人信息
- **我的订单**：查看购买订单
- **我的收藏**：收藏的商品
- **退出登录**

### 3. 商品管理功能

#### 商品列表
- 分页显示商家的所有商品
- 支持按商品状态（上架/下架）筛选
- 支持关键词搜索（商品名称、品牌、描述）
- 显示商品基本信息：ID、图片、名称、品牌、价格、库存、销量、状态

#### 添加商品
商家可以添加新商品，需填写以下信息：
- **基本信息**：商品名称、品牌、商品分类
- **价格库存**：商品价格、原价、库存数量
- **商品属性**：适用肤质、功效
- **商品详情**：商品主图、商品描述、商品标签
- **上架状态**：上架/下架

#### 编辑商品
- 点击"编辑"按钮可修改商品信息
- 支持修改所有商品字段
- 修改后立即生效

#### 上架/下架
- 快速切换商品上架/下架状态
- 只有上架商品才会在前台展示
- 下架商品不会被删除，可随时重新上架

#### 删除商品
- 支持删除商品（逻辑删除）
- 删除前有二次确认
- 删除后无法恢复

### 3. 商品分类
系统预设以下分类：
1. 护肤品
2. 彩妆
3. 面膜
4. 洁面
5. 精华

### 4. 适用肤质选项
- 所有肤质
- 干性肤质
- 油性肤质
- 混合肤质
- 敏感肤质

## 技术实现

### 后端接口

#### 商品管理接口

1. **获取商家商品列表**
```
GET /product/merchant/page
参数：
  - merchantId: 商家ID（必填）
  - current: 当前页码（默认1）
  - size: 每页数量（默认10）
  - keyword: 搜索关键词（可选）
  - status: 商品状态（可选，0-下架，1-上架）
```

2. **更新商品状态**
```
PUT /product/status/{id}
参数：
  - id: 商品ID（路径参数）
  - status: 状态值（0-下架，1-上架）
```

3. **添加商品**
```
POST /product/add
请求体：Product对象
```

4. **更新商品**
```
PUT /product/update
请求体：Product对象
```

5. **删除商品**
```
DELETE /product/{id}
参数：
  - id: 商品ID（路径参数）
```

#### 订单管理接口

1. **获取商家订单列表**
```
GET /order/merchant/page
参数：
  - merchantId: 商家ID（必填）
  - current: 当前页码（默认1）
  - size: 每页数量（默认10）
  - status: 订单状态（可选）
```

2. **发货**
```
PUT /order/deliver/{orderId}
参数：
  - orderId: 订单ID（路径参数）
```

### 前端实现

#### 页面结构

1. **商家商品管理页面** (`/merchant/products`)
   - 筛选栏：状态筛选、关键词搜索
   - 商品列表表格：展示商品信息及操作按钮
   - 分页组件：支持切换页码和每页数量

2. **商家订单管理页面** (`/merchant/orders`，新增）
   - 筛选栏：订单状态筛选
   - 订单列表表格：展示订单信息及操作按钮
   - 发货功能：对待发货订单进行发货操作
   - 订单详情：查看订单完整信息
   - 分页组件：支持切换页码和每页数量

3. **商品编辑表单组件** (`ProductForm.vue`)
   - 弹窗形式
   - 表单验证
   - 支持添加和编辑两种模式

#### 路由配置
- 商品管理路径：`/merchant/products`
- 订单管理路径：`/merchant/orders`
- 权限要求：需要登录 + 商家角色（role=1）
- 访问控制：路由守卫会检查用户角色，非商家用户会被拦截

#### 菜单区分
**商家用户菜单：**
- 个人中心
- 商品管理
- 订单管理
- 退出登录

**普通用户菜单：**
- 个人中心
- 我的订单
- 我的收藏
- 退出登录

#### 入口位置
1. **顶部导航栏**：点击头像下拉菜单，根据角色显示对应选项
2. **个人中心页面**：根据角色显示对应的功能菜单

## 使用说明

### 商家用户注册
1. 注册时选择"商家"角色（role=1）
2. 注册成功后登录系统

### 访问商家功能
1. 登录后点击右上角头像
2. 商家用户会看到：
   - **商品管理**：管理商品
   - **订单管理**：处理订单
3. 也可以通过"个人中心"页面访问这些功能

### 管理商品
1. 在商品管理页面点击右上角"添加商品"按钮
2. 填写商品信息（标记*的为必填项）
3. 选择上架状态
4. 点击"添加"按钮提交
5. 在列表中可以编辑、上下架或删除商品

### 处理订单（新增）
1. 在订单管理页面查看所有订单
2. 可以按状态筛选订单
3. 对于"待发货"的订单：
   - 点击"发货"按钮
   - 确认发货后，订单状态变为"待收货"
4. 点击"查看"按钮可以查看订单详细信息

## 注意事项

1. **用户角色区分**：商家和普通用户的菜单和功能已完全区分
2. **商品管理**：
   - 商品图片URL需要有效的图片链接
   - 商品价格和库存必须大于等于0
   - 只有上架的商品才会在前台展示给用户
   - 删除商品是逻辑删除，但前台不会再显示
   - 商品标签使用逗号分隔，如：热销,新品,推荐
3. **订单管理**：
   - 只能对"待发货"状态的订单进行发货操作
   - 发货后买家可以确认收货
   - 订单状态流转：待付款 → 待发货 → 待收货 → 待评价 → 已完成

## 后续优化建议

### 商品管理
1. **图片上传**：集成图片上传服务（如OSS），支持直接上传图片而非填写URL
2. **富文本编辑**：商品描述使用富文本编辑器，支持格式化内容
3. **多图展示**：支持上传和管理多张商品图片
4. **批量操作**：支持批量上架、下架、删除商品
5. **数据统计**：添加商品销售数据统计和分析
6. **分类管理**：允许商家自定义商品分类
7. **商品审核**：添加管理员审核机制，确保商品质量
8. **库存预警**：当库存低于阈值时提醒商家补货

### 订单管理
1. **物流跟踪**：集成物流系统，实时跟踪订单配送状态
2. **批量发货**：支持批量处理订单发货
3. **订单导出**：支持导出订单数据为Excel
4. **订单搜索**：支持按订单号、收货人等条件搜索
5. **订单统计**：添加订单金额、数量等数据统计图表
6. **退款处理**：增加退款、退货处理流程
7. **订单打印**：支持打印订单和发货单
8. **消息通知**：新订单自动通知商家

### 数据分析
1. **销售报表**：按日、周、月统计销售数据
2. **商品排行**：显示热销商品排行榜
3. **用户分析**：分析用户购买行为和偏好
4. **收益统计**：展示商家收益趋势图
